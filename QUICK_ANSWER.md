# üéØ –ö–†–ê–¢–ö–ò–ô –û–¢–í–ï–¢ –ù–ê –í–ê–®–ò –í–û–ü–†–û–°–´

## 1. –ì–¥–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã? ‚úÖ

**–°—Ç–∞—Ç—É—Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:**
- ‚úÖ **PostgreSQL** - –†–∞–∑–≤–µ—Ä–Ω—É—Ç (10.43.1.196:5432)
- ‚úÖ **Redis** - –†–∞–∑–≤–µ—Ä–Ω—É—Ç (10.43.89.168:6379)
- üîÑ **Keycloak** - –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è (–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ)
- üîÑ **Ingress NGINX** - –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è (–¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ web-—Å–µ—Ä–≤–∏—Å–∞–º)
- üìã **GitLab, Grafana, Prometheus** - –ü–ª–∞–Ω–∏—Ä—É—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–º–∏

**–ö–æ–º–∞–Ω–¥–∞ –ø–æ–ª–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:**
```powershell
cd "E:\–ù–æ–≤–∞—è –ø–∞–ø–∫–∞\All_project\Ceres"
.\deploy-all.ps1
```

**–ß—Ç–æ –±—É–¥–µ—Ç —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ:**
1. PostgreSQL (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö) ‚úÖ
2. Redis (–∫–µ—à) ‚úÖ
3. Keycloak (SSO/–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è) üîÑ
4. Ingress NGINX (–¥–æ—Å—Ç—É–ø –∫ web-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º) üîÑ
5. –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (GitLab, Grafana –∏ —Ç.–¥.) - –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é

---

## 2. –ì–¥–µ –≤ Proxmox –æ–ø–∏—Å–∞–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è? ‚úÖ

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ Proxmox:**
```bash
ssh root@192.168.1.3

# Kubernetes —Å–µ—Ä–≤–∏—Å—ã
kubectl get all -A

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
kubectl get svc -n ceres-core -o wide
kubectl get svc -n ceres -o wide

# IP –∞–¥—Ä–µ—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
kubectl get endpoints -A
```

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ:**
- `docs/ACCESS_SERVICES.md` - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–∏—Å–∞–º
- `docs/VPN_SETUP.md` - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ VPN
- `DEPLOYMENT_PLAN.md` - –ü–ª–∞–Ω —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- `DEPLOYMENT_RESULTS.md` - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–µ–ø–ª–æ—è

**–¢–µ–∫—É—â–∏–µ IP –∞–¥—Ä–µ—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤:**
```
PostgreSQL: 10.43.1.196:5432
Redis:      10.43.89.168:6379
Keycloak:   <–±—É–¥–µ—Ç –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è>
```

---

## 3. VPN –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º ‚úÖ

**WireGuard VPN –£–ñ–ï –ù–ê–°–¢–†–û–ï–ù –Ω–∞ Proxmox!**

### –°—Ç–∞—Ç—É—Å:
```
–°–µ—Ä–≤–µ—Ä: 10.8.0.1 (Proxmox)
–ü–æ—Ä—Ç: 51820
–°–µ—Ç—å VPN: 10.8.0.0/24
–°—Ç–∞—Ç—É—Å: ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏):
```powershell
# 1. –°–∫–∞—á–∞—Ç—å –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å WireGuard
# https://www.wireguard.com/install/

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫—É
cd "E:\–ù–æ–≤–∞—è –ø–∞–ø–∫–∞\All_project\Ceres"
.\scripts\setup-vpn.ps1

# 3. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ WireGuard GUI
# –§–∞–π–ª: config\wireguard\ceres-vpn.conf

# 4. –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ç—É–Ω–Ω–µ–ª—å –≤ WireGuard
```

### –ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ VPN:

**–ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º (–±–µ–∑ kubectl port-forward):**
```
PostgreSQL: 10.43.1.196:5432
  - –ö–ª–∏–µ–Ω—Ç: DBeaver, pgAdmin
  - User: postgres
  - Password: ceres_postgres_2025

Redis: 10.43.89.168:6379
  - –ö–ª–∏–µ–Ω—Ç: RedisInsight, Redis Desktop Manager
  - Password: ceres_redis_2025

Keycloak: http://keycloak.ceres.local
  - User: admin
  - Password: K3yClo@k!2025
```

**Hosts —Ñ–∞–π–ª (C:\Windows\System32\drivers\etc\hosts):**
–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è Ingress, –¥–æ–±–∞–≤–∏—Ç—å:
```
<ClusterIP>  keycloak.ceres.local
<ClusterIP>  gitlab.ceres.local
<ClusterIP>  grafana.ceres.local
```

---

## üìã –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω

### –®–∞–≥ 1: –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–µ–ø–ª–æ—è
```powershell
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
kubectl get pods -n ceres-core
kubectl get pods -n ceres
kubectl get pods -n ingress-nginx
```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å VPN
```powershell
.\scripts\setup-vpn.ps1
```

### –®–∞–≥ 3: –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ VPN
- –û—Ç–∫—Ä—ã—Ç—å WireGuard GUI
- –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `config\wireguard\ceres-vpn.conf`
- –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ç—É–Ω–Ω–µ–ª—å

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø
```powershell
# –ß–µ—Ä–µ–∑ VPN
ping 10.8.0.1          # Proxmox VPN
ping 10.43.1.196       # PostgreSQL
ping 10.43.89.168      # Redis

# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL —á–µ—Ä–µ–∑ DBeaver
# Host: 10.43.1.196
# Port: 5432
```

---

## üéØ –ò—Ç–æ–≥–æ

**–í—ã –ø–æ–ª—É—á–∏—Ç–µ:**
1. ‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã –≤ Kubernetes
2. ‚úÖ VPN –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
3. ‚úÖ Web-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —á–µ—Ä–µ–∑ –¥–æ–º–µ–Ω—ã (keycloak.ceres.local)
4. ‚úÖ –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ GUI –∫–ª–∏–µ–Ω—Ç—ã
5. ‚úÖ –ù–∏–∫–∞–∫–æ–≥–æ port-forward - —Ç–æ–ª—å–∫–æ VPN —Ç—É–Ω–Ω–µ–ª—å

**–°–µ–π—á–∞—Å –∑–∞–ø—É—â–µ–Ω:** `.\deploy-all.ps1` (—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã)  
**–í—Ä–µ–º—è –¥–µ–ø–ª–æ—è:** ~5-10 –º–∏–Ω—É—Ç  
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å VPN –∫–ª–∏–µ–Ω—Ç
