# üìã –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò - –ü–†–û–ë–õ–ï–ú–ê –ò –†–ï–®–ï–ù–ò–ï

## ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê –ù–ê–ô–î–ï–ù–ê

–°–µ—Ä–≤–µ—Ä 192.168.1.3 **–ù–ï –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –≤ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç**!

```
curl: (6) Could not resolve host: get.k3s.io
```

–≠—Ç–æ Proxmox VM –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ –±–µ–∑ NAT/–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.

---

## ‚úÖ –†–ï–®–ï–ù–ò–Ø

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–µ—Ç–µ–≤–æ–π –¥–æ—Å—Ç—É–ø –Ω–∞ Proxmox (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

–ù–∞ Proxmox —Ö–æ—Å—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å:

```bash
# –í–∫–ª—é—á–∏—Ç—å NAT –¥–ª—è VM 192.168.1.3
# –ò–õ–ò –¥–æ–±–∞–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç —á–µ—Ä–µ–∑ gateway

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞
iptables -t nat -L

# –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å NAT:
iptables -t nat -A POSTROUTING -o vmbr0 -j MASQUERADE
```

–ó–∞—Ç–µ–º –ø—Ä–æ—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é.

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Docker –≤—Ä—É—á–Ω—É—é (–µ—Å–ª–∏ –Ω–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞)

–ù–∞ –∫–æ–Ω—Å–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞ 192.168.1.3:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Docker (–º–æ–∂–µ—Ç –±—ã—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ Proxmox)
apt update && apt install -y docker.io

# –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å k3s —Å –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
# –≠—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –Ω–∞–ª–∏—á–∏—è –æ–±—Ä–∞–∑–æ–≤ –Ω–∞ Proxmox —Ö–æ—Å—Ç–µ
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 3: –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Ä—É—á–Ω—É—é

1. **–°–∫–∞—á–∞—Ç—å –Ω–∞ Windows:**
```powershell
Invoke-WebRequest -Uri "https://get.k3s.io" -OutFile "$HOME\Downloads\k3s-install.sh" -UseBasicParsing
```

2. **–ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞ Proxmox —á–µ—Ä–µ–∑ SCP**
3. **–í—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–∞ VM 192.168.1.3**

---

## üéØ –ß–¢–û –ù–£–ñ–ù–û –î–ï–õ–ê–¢–¨

**–ù–∞ Proxmox —Ö–æ—Å—Ç–µ (192.168.1.1):**

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ç–µ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é VM
# 2. –í–∫–ª—é—á–∏—Ç—å NAT –∏–ª–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é
# 3. –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Docker/k3s –Ω–∞ Proxmox —Ö–æ—Å—Ç–µ

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–º–µ–µ—Ç –ª–∏ VM –¥–æ—Å—Ç—É–ø –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç:
# –í–Ω—É—Ç—Ä–∏ VM:
ping 8.8.8.8
curl https://get.k3s.io -I
```

---

## üìù –ú–ò–ù–ò–ú–ê–õ–¨–ù–´–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –Ω—É–∂–Ω–æ **–û–î–ù–û –∏–∑:**
- ‚úÖ –î–æ—Å—Ç—É–ø VM –≤ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç (—á–µ—Ä–µ–∑ NAT)
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Docker (–Ω–∞ Proxmox)
- ‚úÖ –†—É—á–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –≤ –∫–æ–Ω—Å–æ–ª–∏ VM

---

**–ë–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –Ω–∞ VM - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞!**

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Proxmox.



### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Proxmox –∫–æ–Ω—Å–æ–ª—å (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Proxmox**: https://192.168.1.1:8006
2. **–ù–∞–π–¥–∏—Ç–µ VM** ‚Üí 192.168.1.3 –≤ —Å–ø–∏—Å–∫–µ —Å–ª–µ–≤–∞
3. **–ù–∞–∂–º–∏—Ç–µ Console** (–æ—Ç–∫—Ä–æ–µ—Ç—Å—è VNC –∫–æ–Ω—Å–æ–ª—å)
4. **–í–≤–µ–¥–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª—å:**

```bash
curl -fsSL https://get.k3s.io | sh -
```

5. **–î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è** (5-10 –º–∏–Ω—É—Ç)

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ SSH (–µ—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø)

```bash
ssh root@192.168.1.3

# –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å: <DEPLOY_PASSWORD>

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤–≤–µ–¥–∏—Ç–µ:
curl -fsSL https://get.k3s.io | sh -

# –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:
kubectl get nodes
exit
```

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –ü–û–°–õ–ï –£–°–¢–ê–ù–û–í–ö–ò

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é
k3s --version

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–æ–¥—ã
kubectl get nodes

# –ü–æ–ª—É—á–∏—Ç—å kubeconfig (–¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ development)
cat /etc/rancher/k3s/k3s.yaml
```

---

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ k3s –Ω–∞ 192.168.1.3:

1. **–ù–∞ Windows:**
```powershell
# –ü–æ–ª—É—á–∏—Ç—å kubeconfig —Å —Å–µ—Ä–≤–µ—Ä–∞
scp -o StrictHostKeyChecking=no root@192.168.1.3:/etc/rancher/k3s/k3s.yaml "$HOME\k3s.yaml"

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º GitHub secrets
gh secret set KUBECONFIG --body (Get-Content "$HOME\k3s.yaml" -Raw) -R skulesh01/Ceres
```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å deployment:**
```powershell
gh workflow run ceres-deploy.yml -R skulesh01/Ceres
```

3. **–°–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç—É—Å:**
```powershell
gh run watch -R skulesh01/Ceres
```

---

## ‚ö†Ô∏è –í–ê–ñ–ù–û

- **–ü–∞—Ä–æ–ª—å:** <DEPLOY_PASSWORD>
- **IP —Å–µ—Ä–≤–µ—Ä–∞:** 192.168.1.3
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** root

---

**–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç:**
- [ ] –û—Ç–∫—Ä—ã–ª–∏ Proxmox –∫–æ–Ω—Å–æ–ª—å –∏–ª–∏ –ø–æ–¥–∫–ª—é—á–∏–ª–∏—Å—å —á–µ—Ä–µ–∑ SSH
- [ ] –í—ã–ø–æ–ª–Ω–∏–ª–∏: `curl -fsSL https://get.k3s.io | sh -`
- [ ] –î–æ–∂–¥–∞–ª–∏—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (—Å—Ç–∞—Ç—É—Å OK)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª–∏: `kubectl get nodes`
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏ kubeconfig –Ω–∞ Windows
- [ ] –î–æ–±–∞–≤–∏–ª–∏ secrets –≤ GitHub
- [ ] –ó–∞–ø—É—Å—Ç–∏–ª–∏ GitHub Actions workflow

---

**–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ:** Deployment will start automatically!
