# CERES –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è WireGuard + Email

## üéØ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

–Ø –Ω–∞—Å—Ç—Ä–æ–∏–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–æ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∫ VPN:

### 1. **WireGuard VPN —Å–µ—Ä–≤–µ—Ä** (—É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
- IP: 192.168.1.3:51820
- –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–µ—Ç—å: 10.8.0.0/24
- –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é

### 2. **–ü–æ—á—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä (Postfix)** 
- –†–∞–∑–≤—ë—Ä–Ω—É—Ç –≤ Kubernetes
- –ê–¥—Ä–µ—Å: postfix:25
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥–∏ –Ω–æ–≤—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

### 3. **WireGuard Config Manager** (–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å)
- REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥–∞–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç WireGuard –∫–æ–Ω—Ñ–∏–≥–∏
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥–∏ –ø–æ email –Ω–æ–≤—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç enable/disable –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### 4. **Keycloak** (—Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–æ–º)
- –ë—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://auth.ceres.local
- –°–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å WireGuard –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
- –õ–æ–≥–∏–Ω: admin / admin123

---

## üöÄ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

```
–ù–æ–≤—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –≤ Keycloak 
    ‚Üì
WireGuard Config Manager –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    ‚Üì
–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç WireGuard –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    ‚Üì
–î–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ WireGuard —Å–µ—Ä–≤–µ—Ä
    ‚Üì
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥ –ø–æ email —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
    ‚Üì
–°–æ—Ç—Ä—É–¥–Ω–∏–∫ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥ –≤ WireGuard
    ‚Üì
–ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ VPN –∏ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ç–∏
```

---

## üìã API WireGuard Config Manager

### URL —Å–µ—Ä–≤–∏—Å–∞
```
http://wg-config-manager:5000  (–≤–Ω—É—Ç—Ä–∏ k3s)
http://ceres.local:5000        (—á–µ—Ä–µ–∑ VPN)
```

### 1. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥)
```bash
curl -X POST http://ceres.local:5000/api/v1/user/register \
  -H "Authorization: Bearer wg-secure-token-12345" \
  -H "Content-Type: application/json" \
  -d '{
    "user_id": "550e8400-e29b-41d4-a716-446655440000",
    "username": "ivan.petrov",
    "email": "ivan@company.local"
  }'
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è WireGuard –∫–ª—é—á–∏
- –°–æ–∑–¥–∞—ë—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ö–æ–Ω—Ñ–∏–≥ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ /data/wg-configs/
- Email –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

### 2. –û—Ç–∫–ª—é—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```bash
curl -X POST http://ceres.local:5000/api/v1/user/550e8400-e29b-41d4-a716-446655440000/disable \
  -H "Authorization: Bearer wg-secure-token-12345"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–æ–ª—å—à–µ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ VPN
- –ï–≥–æ –∫–æ–Ω—Ñ–∏–≥ –æ—Ç–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –æ—Ç–∫–ª—é—á—ë–Ω–Ω—ã–π
- –ò—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

### 3. –í–∫–ª—é—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–±—Ä–∞—Ç–Ω–æ
```bash
curl -X POST http://ceres.local:5000/api/v1/user/550e8400-e29b-41d4-a716-446655440000/enable \
  -H "Authorization: Bearer wg-secure-token-12345"
```

### 4. –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```bash
curl http://ceres.local:5000/api/v1/users \
  -H "Authorization: Bearer wg-secure-token-12345"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "users": [
    {
      "user_id": "550e8400-e29b-41d4-a716-446655440000",
      "username": "ivan.petrov",
      "email": "ivan@company.local",
      "public_key": "...",
      "created": "2026-01-01T12:00:00",
      "enabled": true
    }
  ],
  "total": 1
}
```

---

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ PowerShell —Å–∫—Ä–∏–ø—Ç–∞

–í–º–µ—Å—Ç–æ curl –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:

```powershell
# –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
.\manage-wg-users.ps1 -Action list

# –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
.\manage-wg-users.ps1 -Action add `
  -UserId "550e8400-e29b-41d4-a716-446655440000" `
  -Username "ivan.petrov" `
  -Email "ivan@company.local"

# –û—Ç–∫–ª—é—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
.\manage-wg-users.ps1 -Action disable `
  -UserId "550e8400-e29b-41d4-a716-446655440000"

# –í–∫–ª—é—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
.\manage-wg-users.ps1 -Action enable `
  -UserId "550e8400-e29b-41d4-a716-446655440000"
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### API Token
- **–¢–µ–∫—É—â–∏–π —Ç–æ–∫–µ–Ω:** `wg-secure-token-12345`
- **–ì–¥–µ –∏–∑–º–µ–Ω–∏—Ç—å:** Secret –≤ Kubernetes `wg-manager-secret`
- **–ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å:**
```bash
kubectl patch secret wg-manager-secret -n ceres \
  -p '{"stringData":{"API_TOKEN":"–Ω–æ–≤—ã–π-—Ç–æ–∫–µ–Ω-—Ç—É—Ç"}}'
```

### –•—Ä–∞–Ω–∏–ª–∏—â–µ –∫–æ–Ω—Ñ–∏–≥–æ–≤
- –í—Å–µ –∫–æ–Ω—Ñ–∏–≥–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `/data/wg-configs/`
- –§–∞–π–ª—ã –∏–º–µ—é—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ 600 (—Ç–æ–ª—å–∫–æ owner –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å)
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ JSON –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –∫–æ–Ω—Ñ–∏–≥–æ–≤

–í `/data/wg-configs/` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ–∑–¥–∞—é—Ç—Å—è –¥–≤–∞ —Ñ–∞–π–ª–∞:

### `user-id.conf` - WireGuard –∫–æ–Ω—Ñ–∏–≥
```ini
[Interface]
PrivateKey = SDm4ZokXEP1pjZJ0VMhXWjtkvcUUKjJlo42+weIZY0A=
Address = 10.8.0.10/32
DNS = 8.8.8.8, 8.8.4.4

[Peer]
PublicKey = zttDeGkGM90yz/yUuP3Ni/jdpF0+Y2rlLKtgMOZda1s=
AllowedIPs = 10.8.0.0/24, 192.168.1.0/24
Endpoint = 192.168.1.3:51820
PersistentKeepalive = 25
```

### `user-id.json` - –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
```json
{
  "user_id": "550e8400-e29b-41d4-a716-446655440000",
  "username": "ivan.petrov",
  "email": "ivan@company.local",
  "public_key": "t5sPro+TJcRh0bwN56Al5nkdKdRt34iGCLlPbVcK+2Y=",
  "created": "2026-01-01T12:00:00",
  "enabled": true
}
```

---

## üíæ –¢–∏–ø–∏—á–Ω—ã–π workflow

### –î–µ–Ω—å 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
1. –°–æ—Ç—Ä—É–¥–Ω–∏–∫ —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤ Keycloak (admin@ceres.local)
2. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è API `/api/v1/user/register`
3. –ù–∞ email —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç –∫–æ–Ω—Ñ–∏–≥ WireGuard
4. –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥ –≤ WireGuard
5. –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ VPN

### –î–µ–Ω—å 100: –°–æ—Ç—Ä—É–¥–Ω–∏–∫ —É–≤–æ–ª—å–Ω—è–µ—Ç—Å—è
1. –í Keycloak –æ—Ç–º–µ—á–∞–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –∫–∞–∫ "–æ—Ç–∫–ª—é—á—ë–Ω"
2. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è API `/api/v1/user/{id}/disable`
3. WireGuard –∫–æ–Ω—Ñ–∏–≥ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–º
4. –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –±–æ–ª—å—à–µ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ VPN
5. –ò—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –¥–ª—è –∞—É–¥–∏—Ç–∞

### –î–µ–Ω—å 101: –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –≤–µ—Ä–Ω—É–ª—Å—è –Ω–∞ —Ä–∞–±–æ—Ç—É
1. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è API `/api/v1/user/{id}/enable`
2. WireGuard –∫–æ–Ω—Ñ–∏–≥ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è —Å–Ω–æ–≤–∞
3. –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ VPN

---

## üêõ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ WireGuard –º–µ–Ω–µ–¥–∂–µ—Ä–∞
```bash
kubectl logs -n ceres deployment/wg-config-manager -f
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ Postfix
```bash
kubectl logs -n ceres deployment/postfix -f
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ Keycloak
```bash
kubectl logs -n ceres deployment/keycloak -f
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–Ω—Ñ–∏–≥–æ–≤ –Ω–∞ –¥–∏—Å–∫–µ
```bash
ls -la /data/wg-configs/
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ Keycloak
```bash
kubectl port-forward -n ceres svc/keycloak 8080:8080
# –ü–æ—Ç–æ–º –æ—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8080
```

---

## ‚ö° –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

### Webhook –¥–ª—è HR-—Å–∏—Å—Ç–µ–º
–ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å webhook –≤ HR-—Å–∏—Å—Ç–µ–º–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, BambooHR, Workday) –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–∑–æ–≤–∞ API –ø—Ä–∏:
- –î–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- –£–¥–∞–ª–µ–Ω–∏–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- –ò–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞

–ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
```
HR-—Å–∏—Å—Ç–µ–º–∞ ‚Üí POST –∫ http://ceres.local:5000/api/v1/user/register ‚Üí User –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LDAP/Active Directory
–ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Keycloak –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å AD:
1. –û—Ç–∫—Ä—ã—Ç—å Keycloak Admin Console
2. –†–µ–∞–ª—å–º ‚Üí User Federation ‚Üí Add LDAP provider
3. –£–∫–∞–∑–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã AD —Å–µ—Ä–≤–µ—Ä–∞
4. –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é

---

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
–°–µ–π—á–∞—Å –∫–æ–Ω—Ñ–∏–≥–∏ –Ω–µ –∏–º–µ—é—Ç —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è. –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:
1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å `wg-config-manager.py`
2. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `expires_at`
3. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≤ `list_users`

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
–ú–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ç—Ä–∞—Ñ–∏–∫ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ tc (traffic control) –Ω–∞ WireGuard —Å–µ—Ä–≤–µ—Ä–µ:
```bash
tc qdisc add dev wg0 root tbf rate 10mbit burst 32kbit latency 400ms
```

### –î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
Keycloak –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 2FA –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –í–∫–ª—é—á–∏—Ç—å –≤ Admin Console.

---

## üéì –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å Keycloak –ø–æ–ª–Ω–æ—Å—Ç—å—é**
   - –ù—É–∂–µ–Ω –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –Ω–∞ VM –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –æ–±—Ä–∞–∑–∞
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä –æ–±—Ä–∞–∑–æ–≤

2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Keycloak Events**
   - –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤ Keycloak ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑–æ–≤–µ—Ç—Å—è API —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

3. **–î–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –≤ WireGuard –º–µ–Ω–µ–¥–∂–µ—Ä**
   - OAuth2 —á–µ—Ä–µ–∑ Keycloak –≤–º–µ—Å—Ç–æ –ø—Ä–æ—Å—Ç–æ–≥–æ —Ç–æ–∫–µ–Ω–∞

4. **Dashboard –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**
   - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
   - –ì—Ä–∞—Ñ–∏–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞

5. **–†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –∫–æ–Ω—Ñ–∏–≥–æ–≤**
   - –†–µ–≥—É–ª—è—Ä–Ω–æ–µ —Å–Ω—è—Ç–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π `/data/wg-configs/`
   - –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ S3/backup —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**API Token –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤:**
```
wg-secure-token-12345
```

**–ë–∞–∑–æ–≤—ã–π URL:**
```
http://ceres.local:5000
```

**–ö–æ–Ω—Ç–∞–∫—Ç:** admin@company.local
