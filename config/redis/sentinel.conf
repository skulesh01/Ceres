port 26379
bind 0.0.0.0

# Enable auth if needed
requirepass "{{ REDIS_SENTINEL_PASSWORD }}"

# Sentinel monitoring
sentinel monitor ceres-redis-cluster {{ REDIS_MASTER_HOST }} 6379 2
sentinel down-after-milliseconds ceres-redis-cluster 5000
sentinel parallel-syncs ceres-redis-cluster 1
sentinel failover-timeout ceres-redis-cluster 30000
sentinel deny-scripts-reconfig yes

# Logging
loglevel notice
logfile "/var/log/redis/sentinel.log"

# Notification scripts
sentinel notification-script ceres-redis-cluster /etc/redis/notification.sh
sentinel client-reconfig-script ceres-redis-cluster /etc/redis/client-reconfig.sh

# Persistence
dir /var/lib/redis/sentinel

# ACL Configuration
sentinel ACL-log-max-len 128

# Advanced options
sentinel resolve-hostnames yes
sentinel announce-ip {{ REDIS_SENTINEL_IP }}
sentinel announce-port 26379
